- include_vars: group_vars/deploy

- name: Set regular expression pattern for checking
  set_fact: pattern="^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\/([0-9]|[1-2][0-9]|3[0-2])"

- name: Check the ip segment format of public network
  fail: msg="The format of public network is wrong!"
  when: public_network is not none and not public_network | match(pattern)

- name: Check the ip segment format of cluster network
  fail: msg="The format of cluster network is wrong!"
  when: cluster_network is not none and not cluster_network | match(pattern)
